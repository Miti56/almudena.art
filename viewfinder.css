:root {
    --resolution-w: 1920;
    --resolution-h: 1080;
    --screen-color: #000;
    --text-color: #fff;
    --rec-color: #ff0000;
    --hilite-color: #000099;
    --font-size: calc(1vw + 0.5vh);
    --padding: 10px;
}

* { box-sizing: content-box; }
html, body {
    margin: 0; padding: 0; width: 100%; height: 100%;
    background-color: var(--screen-color); color: var(--text-color);
    font-family: Arial, Helvetica, sans-serif;
    display: flex; justify-content: center; align-items: center;
    text-shadow: -1px -1px 0 var(--hilite-color), 1px -1px 0 var(--hilite-color),
    1px 1px 0 var(--hilite-color), -1px 1px 0 var(--hilite-color);
    font-size: var(--font-size);
}

.ratio_16x9 {
    position: relative;
    /* Set full width by default */
    --width: 100vw; /* define the variable */
    width: var(--width);
    height: calc(var(--width) * var(--resolution-h) / var(--resolution-w)); /* maintain 16:9 */
    max-height: 100vh; /* prevent overflow on short screens */
    background-color: var(--screen-color);
    overflow: hidden;
}


/* --- Top-left --- */
div.rec, div.bat, div.wifi {
    position: absolute;
    top: 10px;
    padding: 2px 5px;
    background: rgba(0,0,0,0.5);
    border-radius: 3px;
    font-size: 0.8em;
}
div.rec { left: 10px; }
div.bat { left: 110px; }
div.wifi { left: 200px; }

/* --- Top-right --- */
div.mode, div.focus, div.drive {
    position: absolute;
    top: 10px;
    padding: 2px 5px;
    background: rgba(0,0,0,0.5);
    border-radius: 3px;
    font-size: 0.8em;
    text-align: right;
}
div.mode { right: 10px; }
div.focus { right: 10px; top: 35px; }
div.drive { right: 10px; top: 60px; }

/* --- Bottom-left --- */
div.settings {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    gap: 15px;
    background: rgba(0,0,0,0.5);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
}

/* --- Bottom-right --- */
div.counter, div.format {
    position: absolute;
    bottom: 10px;
    right: 10px;
    padding: 2px 5px;
    background: rgba(0,0,0,0.5);
    border-radius: 3px;
    font-size: 0.8em;
    text-align: right;
}

/* --- Center grid --- */
div.focus-grid {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    display: flex; align-items: center; justify-content: center;
}

div.focus-grid .cnt {
    display: inline-block;
    font-size: 2em;
    width: 1em; height: 1em; line-height: 1em;
    text-align: center;
    /* border: 2px solid var(--text-color); */
    /* border-radius: 50%; */
    /* box-shadow: 0 0 0 1px var(--text-color); */
}


div.focus-grid .grid-lines {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    background-image:
            linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px);
    background-size: 33.33% 33.33%;
    pointer-events: none;
}

/* --- Gallery Button --- */
div.gallery {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.6);
    border-radius: 50%;
    width: 40px; height: 40px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 1.2em;
}
div.gallery:hover { background: rgba(255,255,255,0.3); }

/* --- Rec blinking --- */
div.rec b {
    color: var(--rec-color);
    animation: blink 1s steps(2, jump-none) infinite;
}
@keyframes blink { 0% {opacity:1} 50%{opacity:0} 100%{opacity:1} }

/* --- Histogram --- */
div.histogram {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 200px; height: 80px;
    background: rgba(0,0,0,0.6);
    border-radius: 4px;
}
.ratio_16x9 {
    position: relative;
    width: 100vw; /* full width */
    height: calc(100vw * var(--resolution-h) / var(--resolution-w)); /* maintain 16:9 */
    max-height: 100vh; /* prevent overflow on short screens */
    background-color: var(--screen-color);
    overflow: hidden;
}

#bg-video {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    z-index: 0;
    filter: brightness(1.05) contrast(1.2) saturate(1.1) blur(0.5px);
    transform-origin: center center;
    will-change: transform, filter;
}

.ratio_16x9 > div {
    z-index: 1;        /* all HUD overlays above video */
}

.ratio_16x9::before {
    content: '';
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.1); /* subtle dark overlay */
    z-index: 0.5;
}
.overlay {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    pointer-events: none; /* so clicks go through */
    z-index: 1; /* above video but below HUD */
}

.scratches {
    background: url('textures/001.jpg') repeat;
    opacity: 0.65;
    mix-blend-mode: lighten; /* blends naturally with video */
}

.dust {
    background: url('textures/Dust-Textures-4.jpg') repeat;
    opacity: 0.25;
    mix-blend-mode: lighten;
}

/*.reflections {*/
/*    background: url('reflections.png') no-repeat center;*/
/*    background-size: cover;*/
/*    opacity: 0.1;*/
/*    mix-blend-mode: screen;*/
/*}*/

.loading-screen {
    position: fixed;       /* cover entire viewport */
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    background: #000;      /* fully black */
    display: flex;
    align-items: center;
    justify-content: center;
    color: #00ff00;
    font-family: monospace;
    font-size: 2em;
    z-index: 9999;         /* above everything */
    flex-direction: column;
    text-align: center;
}

.loading-text::after {
    content: '';
    display: block;
    width: 1em; height: 1em;
    border-radius: 50%;
    margin: 20px auto 0 auto;
    background-color: #00ff00;
    animation: blink 1s steps(2, start) infinite;
}

@keyframes blink {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0; }
}
